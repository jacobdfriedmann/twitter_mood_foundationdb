<!DOCTYPE html>
<html>
<head>
	<title>US Map Demo</title>
	
	<style>
	  #alert {
	    font-family: Arial, Helvetica, sans-serif;
	    font-size: 16px;
	    background-color: #ddd;
	    color: #333;
	    padding: 5px;
	    font-weight: bold;
	  }
	</style>

	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.js"></script>
	<script src="/static/usmap.js"></script>
	
	<script>

	function updateMap() {
		$.get('/', function (data){
			$("#map").remove();
			$("body").append('<div id="map" style="width: 930px; height: 630px; border: solid 3px red;"></div>');
			var styles = {}
			for (state in data) {
				styles[state] = {fill: data[state]['color']}
			}
			console.log(styles);
			$('#map').usmap({
				'stateSpecificStyles': styles 
			})
		})
	}

	$(document).ready(function() {
		updateMap();
		setInterval(updateMap, 15000);
	});
	</script>
</head>
<body>
  <div id="map" style="width: 930px; height: 630px; border: solid 3px red;"></div>
</body>
</html>
